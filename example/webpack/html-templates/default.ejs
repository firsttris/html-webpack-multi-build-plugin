<!DOCTYPE html>
<html>
  <head>
    <title><%= htmlWebpackPlugin.options.title %></title>
    <% if (htmlWebpackPlugin.options.prodMode) { %>
        <% for (item of htmlWebpackPlugin.options.meta) { %>
        <meta<% for (key in item) { %> <%= key %>="<%= item[key] %>"<% } %>>
        <% } %>
    <style>
            #overlay {
                position: fixed;
                width: 100%; 
                height: 100%;
                top: 0; 
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 2;
                background-color: white;
            }
            .loader {
                position: absolute;
                left: 45%;
                top: 35%;
                border: 16px solid #f3f3f3;
                border-top: 16px solid black;
                border-radius: 50%;
                width: 120px;
                height: 120px;
                animation: spin 2s linear infinite;
              }
        
              @keyframes spin {
                  0% { transform: rotate(0deg); }
                  100% { transform: rotate(360deg); }
              }
     </style>    
    <% for (key in htmlWebpackPlugin.files.css) { %>
      <% if (htmlWebpackPlugin.options.legacyMode) { %>
      <link href="<%= htmlWebpackPlugin.files.css[key] %>" rel="stylesheet" media="nope!" onload="this.media='all'">
      <% } else { %>
        <link href="<%= htmlWebpackPlugin.files.css[key] %>" rel="preload" as="style" onload="this.rel='stylesheet'">
      <% } %>
    <% } %>
    <% } %>
  </head>
  <body>
        <% if (htmlWebpackPlugin.options.appMountId) { %>
            <div id="<%= htmlWebpackPlugin.options.appMountId %>">
                  <div id="overlay">
                      <div id="spinner" class="loader"></div>
                  </div>
            </div>
        <% } %>
        <% for (key in htmlWebpackPlugin.options.modernScripts) { %>
          <script src="<%= htmlWebpackPlugin.options.modernScripts[key] %>" type="text/javascript"></script>
        <% } %> 
        <% for (key in htmlWebpackPlugin.options.legacyScripts) { %>
          <script src="<%= htmlWebpackPlugin.options.legacyScripts[key] %>" type="text/javascript"></script>
        <% } %>       
  </body>
</html>